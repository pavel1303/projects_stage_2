(()=>{"use strict";var e={373:(e,t,n)=>{n.r(t)},724:function(e,t){var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function c(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}s((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.updateWinner=t.deleteWinner=t.createWinner=t.getWinner=t.getWinners=t.switchDriveMode=t.toggleEngineCar=t.updateCar=t.deleteCar=t.createCar=t.getCar=t.getCars=void 0;const r="http://127.0.0.1:3000";t.getCars=(e=1)=>n(void 0,void 0,void 0,(function*(){try{const t=yield fetch(`${r}/garage?_page=${e}&_limit=7`);return{cars:yield t.json(),count:t.headers.get("X-Total-Count")||"0"}}catch(e){if(e instanceof Error)throw new Error(e.message)}})),t.getCar=e=>n(void 0,void 0,void 0,(function*(){try{const t=yield fetch(`${r}/garage/${e}`);return yield t.json()}catch(e){if(e instanceof Error)throw new Error(e.message);return new Object}})),t.createCar=e=>n(void 0,void 0,void 0,(function*(){try{yield fetch(`${r}/garage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(e){if(e instanceof Error)throw new Error(e.message)}})),t.deleteCar=e=>n(void 0,void 0,void 0,(function*(){try{yield fetch(`$${r}/garage/${e}`,{method:"DELETE"})}catch(e){if(e instanceof Error)throw new Error(e.message)}})),t.updateCar=(e,t)=>n(void 0,void 0,void 0,(function*(){try{yield fetch(`${r}/garage/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}catch(e){if(e instanceof Error)throw new Error(e.message)}})),t.toggleEngineCar=(e,t)=>n(void 0,void 0,void 0,(function*(){try{const n=yield fetch(`${r}/engine?id=${e}&status=${t}`,{method:"PATCH"});return yield n.json()}catch(e){if(e instanceof Error)throw new Error(e.message)}})),t.switchDriveMode=(e,t)=>n(void 0,void 0,void 0,(function*(){try{return(yield fetch(`${r}/engine?id=${e}&status=${t}`,{method:"PATCH"})).status}catch(e){if(e instanceof Error)throw new Error(e.message)}})),t.getWinners=(e,t,o=1)=>n(void 0,void 0,void 0,(function*(){try{const n=yield fetch(`${r}/winners?_page=${o}&_limit=10&_sort=${e}&_order=${t}`);return{winners:yield n.json(),count:n.headers.get("X-Total-Count")||"0"}}catch(e){if(e instanceof Error)throw new Error(e.message)}})),t.getWinner=e=>n(void 0,void 0,void 0,(function*(){try{const t=yield fetch(`${r}/winners/${e}`);return yield t.json()}catch(e){if(e instanceof Error)throw new Error(e.message);return new Object}})),t.createWinner=e=>n(void 0,void 0,void 0,(function*(){try{yield fetch(`${r}/winners`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(e){if(e instanceof Error)throw new Error(e.message)}})),t.deleteWinner=e=>n(void 0,void 0,void 0,(function*(){try{yield fetch(`$${r}/winners/${e}`,{method:"DELETE"})}catch(e){if(e instanceof Error)throw new Error(e.message)}})),t.updateWinner=(e,t)=>n(void 0,void 0,void 0,(function*(){try{yield fetch(`${r}/winners/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}catch(e){if(e instanceof Error)throw new Error(e.message)}}))},401:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0,t.Button=class{createButton(e,t,n){const r=document.createElement("div");return r.className=t,r.innerHTML=e,r.id=n,r}}},239:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CarGarage=void 0;const r=n(401);t.CarGarage=class{constructor(){this.button=new r.Button,this.flag='<div class=\'flag\'>\n    <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg"\n     xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n    viewBox="0 0 447.514 447.514" style="enable-background:new 0 0 447.514 447.514;" xml:space="preserve">\n<path d="M389.183,10.118c-3.536-2.215-7.963-2.455-11.718-0.634l-50.653,24.559c-35.906,17.409-77.917,16.884-113.377-1.418\n   c-38.094-19.662-83.542-18.72-120.789,2.487V20c0-11.046-8.954-20-20-20s-20,8.954-20,20v407.514c0,11.046,8.954,20,20,20\n   s20-8.954,20-20V220.861c37.246-21.207,82.694-22.148,120.789-2.487c35.46,18.302,\n   77.47,18.827,113.377,1.418l56.059-27.18\n   c7.336-3.557,11.995-10.993,11.995-19.146V20.385C394.866,16.212,392.719,12.333,389.183,10.118z" fill=\'red\'/>\n</svg>\n</div>\n    '}createCarItem(e){const t=document.createElement("div");return t.className="car-img",t.innerHTML=`\n    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"\n    xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n    viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">\n<g>\n   <g>\n       <g>\n           <path d="M469.333,264.534H512v-23.842c0-15.087-12.271-27.358-27.358-27.358h-80.043l-91.366-91.366\n               c-3.337-3.337-8.73-3.337-12.066,0c-3.336,3.337-3.336,\n               8.73,0,12.066l79.3,79.3h-81.801v-25.6c0-4.719-3.814-8.533-8.533-8.533\n               s-8.533,3.814-8.533,8.533v25.6h-59.733v-25.6c0-4.719-3.814-8.533-8.533-8.533c-4.719,0-8.533,\n               3.814-8.533,8.533v25.6h-59.733\n               v-34.133c0-14.114-11.486-25.6-25.6-25.6s-25.6,\n               11.486-25.6,25.6v34.133H27.358C12.271,213.334,0,225.605,0,240.692v23.842\n               h42.667c4.719,0,8.533,3.814,8.533,8.533s-3.814,8.533-8.533,\n               8.533H0v32.375c0,15.087,12.271,27.358,27.358,27.358h15.992\n               c4.164,28.894,29.022,51.2,59.051,51.2s54.886-22.306,\n               59.051-51.2h189.099c4.164,28.894,29.022,51.2,59.051,51.2\n               s54.886-22.306,59.051-51.2h15.991c15.087,0,27.358-12.271,\n               27.358-27.358v-32.375h-42.667c-4.719,0-8.533-3.814-8.533-8.533\n               S464.614,264.534,469.333,264.534z M110.933,179.201c0-4.71,\n               3.823-8.533,8.533-8.533s8.533,3.823,8.533,8.533v34.133h-17.067\n               V179.201z M102.4,375.468c-23.526,0-42.667-19.14-42.667-42.667c0-23.526,19.14-42.667,42.667-42.667\n               c23.526,0,42.667,19.14,42.667,42.667C145.067,356.327,125.926,375.468,102.4,375.468z M307.2,281.601\n               c0,4.719-3.814,8.533-8.533,8.533s-8.533-3.814-8.533-8.533v-8.533H256c-4.719,0-8.533-3.814-8.533-8.533\n               s3.814-8.533,8.533-8.533h42.667c4.719,0,8.533,3.814,8.533,\n               8.533V281.601z M409.6,375.468c-23.526,0-42.667-19.14-42.667-42.667\n               c0-23.526,19.14-42.667,42.667-42.667c23.526,0,42.667,19.14,42.667,\n               42.667C452.267,356.327,433.126,375.468,409.6,375.468z" fill='${e}' stroke='white' stroke-width='7'/>\n       </g>\n   </g>\n</g>\n</svg>\n    `,t}createCar({name:e,color:t,id:n}){const r=document.createElement("div"),o=document.createElement("div");return r.innerHTML+=`<p class='car-name'>${e}</p>`,o.append(this.button.createButton("A","btn-small","start-car-btn"),this.button.createButton("B","btn-small","stop-car-btn"),this.button.createButton("S","btn-small","select-car-btn"),this.button.createButton("D","btn-small","delete-car-btn")),o.className="btn-container",r.append(o),r.append(this.createCarItem(t)),r.id=`${n}`,r.innerHTML+='<div class="empty"></div>',r.innerHTML+=this.flag,r.className="car-item",r}}},69:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Input=void 0,t.Input=class{createInput(e,t,n){const r=document.createElement("input");return r.type=e,r.className=t,r.id=n,r}}},862:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Navigation=void 0;const r=n(401);t.Navigation=class{constructor(){this.button=new r.Button}createNav(){const e=document.createElement("nav");return e.className="nav",e.append(this.button.createButton("Garage","button","garage-btn"),this.button.createButton("Winners","button","winners-btn")),e}}},221:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Pangination=void 0;const r=n(401);t.Pangination=class{constructor(){this.button=new r.Button}createPangination(){const e=document.createElement("div");return e.className="pangination",e.append(this.button.createButton("Prev","button","pang-prev"),this.button.createButton("Next","button","pang-next")),e}}},742:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Title=void 0,t.Title=class{createTitle(e,t,n){const r=document.createElement(`h${n}`);return r.textContent=e,r.className=t,r}}},120:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function c(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}s((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.startApp=void 0;const o=n(535),a=n(724);t.startApp=()=>{const e=new o.Garage;document.addEventListener("DOMContentLoaded",(()=>r(void 0,void 0,void 0,(function*(){const t=yield(0,a.getCars)();e.renderPage(t)}))))}},535:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Garage=void 0;const r=n(742),o=n(401),a=n(69),i=n(239),c=n(221),s=n(862);class d extends i.CarGarage{constructor(){super(),this.state=null!==localStorage.getItem("garageState")?JSON.parse(localStorage.getItem("garageState")):{inputName:"",inputColor:"ffffff",page:1},this.button=new o.Button,this.input=new a.Input,this.title=new r.Title,this.pangination=new c.Pangination,this.navigation=new s.Navigation}renderGarageControl(){const e=document.createElement("div");e.className="garage-control";const t=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div");return[t,n,r].forEach((e=>{e.className="manage-block"})),t.append(this.input.createInput("text","text-input","gen-car-text-inp"),this.input.createInput("color","color-input","gen-car-color-inp"),this.button.createButton("Create","button","create-car-btn")),n.append(this.input.createInput("text","text-input","change-car-text-inp"),this.input.createInput("color","color-input","change-car-color-inp"),this.button.createButton("Update","button","change-car-btn")),r.append(this.button.createButton("Race","button","start-race"),this.button.createButton("Reset","button","stop-race"),this.button.createButton("Generate cars","button","gen-cars")),e.append(t,n,r),e}renderCarContainer(e){const t=document.createElement("div");return t.className="car-container",e.forEach((e=>{t.append(this.createCar(e))})),t}renderPage(e){try{const t=(null==e?void 0:e.cars)||[],n=null==e?void 0:e.count;document.body.innerHTML="";const r=document.createElement("header");r.append(this.title.createTitle("Async Race","title",1)),r.append(this.navigation.createNav());const o=document.createElement("main");o.append(this.renderGarageControl()),o.append(this.title.createTitle(`Garage (${n})`,"title",2),this.title.createTitle(`Page #${this.state.page}`,"title",3),this.renderCarContainer(t),this.pangination.createPangination());const a=document.createElement("div");a.append(r,o),document.body.append(a);const i=document.createElement("div");i.className="popup",i.innerHTML="\n        <h2>Уважаемый проверяющий</h2>\n        <p>К сожалению, не успел выполнить работу до дедлайна,</p>\n        <p>буду крайне благодарен за возможность доделать!</p>\n        <p>Если есть такая возможность, проверь пожалуйста работу</p>\n        <p>в четверг</p>\n        <p>Спасибо за понимание! На всякий случай оставлю свой телеграм:</p>\n        <a href='https://t.me/jonybravo13' target=\"_blank\">LINK</a>\n        <p>P.S: чтобы скрыть PopUp кликни на него.</p>\n        <img src='https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQonXes2py3vNEpJQi5ERY_ZjGnjTPyX3aSNQ&usqp=CAU'>\n      ",i.addEventListener("click",(()=>i.classList.add("popup--close"))),document.body.append(i)}catch(e){if(e instanceof Error)throw new Error(e.message)}}}t.Garage=d}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(373),(0,n(120).startApp)()})();